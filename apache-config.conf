# Apache Configuration for Realms of Silver DVDs

# Option 1: If you want to serve from /dvds/ subdirectory
Alias /dvds "/srv/www/htdocs/dvds/dist"
<Directory "/srv/www/htdocs/dvds/dist">
    Options -Indexes
    AllowOverride All
    Require all granted
    
    # Handle Vue.js client-side routing
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /dvds/index.html [L]
    
    # Set proper MIME types
    AddType application/javascript .js
    AddType text/css .css
    
    # Enable compression
    <IfModule mod_deflate.c>
        AddOutputFilterByType DEFLATE text/html text/css application/javascript
    </IfModule>
</Directory>

# Option 2: If you want to serve from /olddvds/ subdirectory (matching your API)
Alias /olddvds "/srv/www/htdocs/olddvds"
<Directory "/srv/www/htdocs/olddvds">
    Options -Indexes
    AllowOverride All
    Require all granted
    
    # Handle Vue.js client-side routing
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /olddvds/index.html [L]
    
    # Set proper MIME types
    AddType application/javascript .js
    AddType text/css .css
    
    # Enable compression
    <IfModule mod_deflate.c>
        AddOutputFilterByType DEFLATE text/html text/css application/javascript
    </IfModule>
</Directory>

# API Configuration
Alias /api "/srv/www/htdocs/api"
<Directory "/srv/www/htdocs/api">
    Options -Indexes
    AllowOverride None
    Require all granted
    
    # Ensure PHP is processed
    <Files "*.php">
        SetHandler application/x-httpd-php
    </Files>
</Directory>